<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[TCP--IP模型]]></title>
    <url>%2F2019%2F06%2F01%2FTCP-IP%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[TCP / IP协议并不完全符合七层OSI参考模型。 传统的开放式系统互连参考模型是一种通信协议，其中每一层执行某一特定任务的七层参考模型的抽象。该模型的目的是，各种硬件在相同的电平进行通信。七个层是：物理层，数据链路层，网络层，传输层，会话层，表示层和应用层。在TCP / IP通讯协议采用四层的层次结构，每一层网络调用其提供完成他们的需要一个新的水平。这四个层次分别是：应用层：应用程序，如简单邮件传输协议（SMTP），文件传输协议（FTP），网络远程访问协议（Telnet）类型等之间的通信层。传输层：在该层中，它提供了通信数据的发送时，节点之间的应用，主要功能是对数据进行格式化，数据丢失和重发，根据权利要求等。传输控制协议（TCP），用户数据报协议（UDP）等，TCP和UDP传输添加的数据分组，并将其传输到下一层，这一层负责传送数据，并且确定数据已被传送和接收。互连网络层：负责提供基本的数据封包传送功能，让每一块数据包都能够到达目的主机（但不检查是否被正确接收），如网际协议（IP）。网络接口层（主机 - 网络层）：接收IP数据包并发送，接收物理帧从网络中提取IP数据报转发到一个新的水平，实际的网络媒体的管理，定义如何使用实际网络（如以太网，串行线路等）来传输数据。 TCP / IP协议的体系结构图 下面简单介绍一下主要的协议TCP / IP，协议都有什么样的功能，是如何工作的：1.IP是IP互联网协议TCP / IP的心脏是最重要的网络层协议。 由IP层接收的是一个较低的层（例如，以太网网络接口设备驱动器层），以将数据包制作和分组发送到更高层— TCP或UDP层;相反，IP层是TCP或UDP从该层接收数据分组到下层。 IP数据包是不可靠的，因为IP并没有做任何事情来确认或没有该数据包以发送销毁。包含该主机的IP数据包发送它的地址（源地址）和接收它的主机的地址（目的地址）。高层的TCP和UDP服务接收数据包时，通常假定数据包的源地址是有效的。也可以这样说，IP地址形成了许多认证服务的基础，这些服务相信数据包是从前来有效的主机发送。 IP一定要包含名为IP源路由选项，可用于指定的源地址和目的地址之间的直接路径。 TCP和UDP的一些服务，利用IP包的，如果选项是从最后一个系统在路径，而不是从它的真实位置通过。这个选项用于测试存在，这表明它可用于欺骗系统通常是被禁止的连接。因此，不要多依靠IP源地址标识的问题，该服务将非法入侵。 2.TCP IP数据包。 如果有被封的TCP数据包中，IP将他们’上’传送到TCP层。的TCP数据包的排序和错误检查，同时实现虚电路之间的连接。 TCP数据包包括的序列号和确认，所接收的分组不是顺序进行排序，损坏的数据包可以被重传。 TCP的信息到更高级别的应用程序，例如Telnet的服务程序和客户端。信息返回给应用程序打开TCP层，TCP传输层把他们下到IP层，设备驱动程序和物理介质，最后到接收方。面向连接的服务（如Telnet，FTP，rlogin的，X Windows和SMTP）要求的可靠性程度高，所以他们使用TCP。 DNS使用TCP（发送和接收域名数据库），在某些情况下，但使用单个主机上的UDP传输的。 3.UDP UDP和TCP在同一层中，但它并不重要分组错误或者重发的次序。 因此，UDP协议并不适用于那些用于服务虚电路连接，UDP主要用于那些服务来应答查询—，如NFS。相对于FTP或Telnet，这些信息服务需要交换量不大。使用UDP的服务包括NTP（网络时间协议）和DNS（DNS也使用TCP）。 UDP数据包欺骗TCP包更容易，而不是欺骗，因为UDP没有建立初始化连接（也称为握手）（因为这两个系统没有VC），即，使用UDP相关的服务面临着更大的危险。 4.ICMP ICMP和IP的处于同一水平，这是用于控制IP信息的传输。它主要用于提供信息通往目的地的路径信息。 ICMP的“重定向”的信息通知主机系统，导致更准确的其他路径，而“不可到达”消息将指示与该路径中的问题。另外，如果路径不可用，ICMP TCP连接可以使’体面’终止。 PING是最常用的基于ICMP的服务。 5 TCP TCP和UDP端口结构和UDP服务通常有客户端/服务器的关系，例如，启动Telnet服务器进程在系统上处于空闲状态，等待连接。用户Telnet客户端建立与服务流程的连接。写入处理信息的客户服务程序，读取信息和服务流程的响应，客户端读取响应用户的报告。因此，该连接是双工可用于读取和写入。这两个系统之间的多个Telnet连接是如何识别相互和统一呢？ TCP或UDP连接使用每个以下四个证实的唯一信息：源IP地址发送数据包的IP地址。接收到的数据包的目的IP地址的IP地址。源端口源系统上的端口连接。目的端口目的系统上的端口连接。端口是一个软件架构，客户端或服务进程用来发送和接收信息。一个端口对应一个16位的数字。服务进程通常使用一个固定的端口，例如，SMTP使用25，Xwindows下6000。这些端口号是“已知的”是因为，当对一个特定的主机或服务的连接要求的通信地址和目的地址。参考模型 TCP / IP协议并不完全符合七层OSI参考模型。传统的开放式系统互连参考模型是一种通信协议，其中每一层执行某一特定任务的七层参考模型的抽象。该模型的目的是，各种硬件在相同的电平进行通信。七个层是：物理层，数据链路层，网络层，传输层，话路的层，表示层和应用层。在TCP / IP通讯协议采用四层的层次结构，每一层网络调用其提供完成他们的需要一个新的水平。这四个层次分别是：应用层：应用程序，如简单邮件传输协议（SMTP），文件传输协议（FTP），网络远程访问协议（Telnet）类型等之间的通信层。传输层：在该层，它提供节点，如传输控制协议（TCP），用户数据报协议（UDP）等，TCP和UDP之间的数据传输服务来传输数据分组到一起，并将其传输到下一层，这一层负责传送数据，并且确定数据已被传送和接收。互连网络层：负责提供基本的数据封包传送功能，让每一块数据包都能够到达目的主机（但不检查是否被正确接收），如网际协议（IP）。网络接口层：实际的网络媒体的管理，定义如何使用实际网络（如以太网，串行线路等）来传输数据。 之所以说TCP / IP是一个协议族，是因为TCP / IP协议，包括TCP，IP，UDP，ICMP，RIP，TELNETFTP，SMTP，ARP，TFTP等许多协议，这些协议一起被称为TCP / IP协议。下面我们就一些常见的协议，协议套件，并使用英文名称的说明：TCP（传输控制协议）传输控制协议IP（互联网协议）的互联网协议UDP（用户数据报协议），用户数据报协议ICMP（Internet控制消息协议） Internet控制消息协议SMTP（简单邮件传输协议）简单邮件传输协议SNMP（简单网络管理协议）SNMP FTP（文件传输协议）文件传输协议ARP（地址解析协议），ARP协议从模型而言分层，TCP /知识产权分为四层：网络接口层，互连网络层，传输层和应用层。其中：其中是TCP / IP软件的最低水平，网络接口层负责接收数据包，并通过IP网络发送或从网络接收物理帧，取IP数据报的IP层。互连网络层负责相邻计算机之间的通信。其特点包括三个方面。首先，应对来自传输层数据包传输请求，收到请求后，数据包在IP数据报头填充，选择路径注定水槽机，然后将数据报发送到相应的网络接口。二，过程输入数据报：首先检查其合法性，然后路由 - 如果数据报到达目的主机，然后取出头，其余部分到合适的传输协议，如果该数据报尚未达到水槽，然后转发该数据报。第三，处理路径，流控制，拥塞和其他问题。在传输层提供应用程序之间的通信。它的功能包括：一，格式化信息流;二，提供可靠的传输。实现后者，传输协议指定的接收方必须发送回一个确认，如果一个数据包丢失，并且必须被重新发送。应用层为用户提供一组通用的应用程序，如电子邮件，文件传输访问，远程登录等。使用TELNET TELNET协议的远程登录提供了网络接口注册的其他主机。 TELNET会话提供了基于字符的虚拟终端。使用FTP协议来提供网络文件拷贝功能的机器访问FTP文件传输。我们已经了解了OSI参考模型的概念，我们现在来看一看，而不是七个协议参考模型，TCP / IP协议是如何实现网络模型。在TCP / IP协议族的应用层 文件传输，电子邮件，文件服务，虚拟终端TFTP，HTTP，SNMP，FTP，SMTP，DNS，RIP协议，远程登录 表示层的数据OSI层的功能格式技术，代码转换，数据加密，没有排出任何协议 会话层，或建立与其他联系人的联系没有协议 传输层提供终端到接口的TCP，UDP 网络层分组选择路由IP，ICMP，OSPF，BGP，IGMP，ARP，RARP 传输数据链路层帧和错误检测功能有SLIP地址，CSLIP，PPP的MTU 物理层到二进制数据的物理形态媒体传输数据ISO2110，IEEE802。 IEEE802.2 数据链路层包括硬件接口和协议ARP，RARP，两个协议主要用于创建和从物理层接收到的信息上传的物理层信息;网络层的协议包括IP，ICMP， IGMP等，因为它包含了IP协议模块，所以它是所有基于TCP / IP协议的网络核心。在网络层，IP模块完成大部分功能。 ICMP和IP和其他IP协议来帮助完成特定的任务，如控制消息的传输差错控制信息以及主机/路由器等IGMP支持。网络层负责网络主机之间的信息传输。主要的传输层协议是TCP和UDP。作为网络层控制该控制数据进入网络层主机传输层之间的数据传输。它管理两个协议，在两种方式中的数据：？ TCP是一个基于连接的协议（还记得我们在网络基础你忘记它谈到了服务的面向连接和无连接服务的理念，去看看），UDP协议为导向的管理风格是无连接的服务。在堆栈的顶部应用层，其主要任务是应用。当然，上述协议的设计也为这些应用中，特别是一些常用的协议功能如下：远程登录：提供远程登录（终端仿真）服务，它似乎比较老的论坛就是采用这种降落。 FTP：文件传输提供应用层服务，说简单点就是远程文件访问等服务; SMTP：不用说拉，日常使用的电子邮件协议。 TFTP：小而简单的文件传输服务，实际上从某个角度看，它是一种替代（尤其是小，只有在时间的文件传输需求）上的FTP。 SNMP：SNMP。看看什么样的名字的含义就不用说了吧。 DNS：域名服务，这是怎么将域名映射到IP地址的协议。网址：我不知道你不熟悉这个协议熟啊？这是超文本传输协议，为什么你现在可以看到网上的图片的原因，动画，音频，等等，都是依靠协议在作怪啊！ （1）开放式协议标准，可以免费使用，并且独立于特定的计算机硬件和操作系统的主要特征;（2）独立的，可以在运行特定的网络硬件局域网，广域网，更适合于因特网（3）统一的网络地址分配方案，使得网络中的全部TCP / IP的设备有一个唯一的地址，（4）标准化的高层协议，可以提供多种可靠的客户服务。 TCP / IP模型有一个主要的缺点：首先，该模型没有明确区分哪些是规范，这是为了实现;其次，主机的TCP / IP模型 - 网络层定义的接口，网络层和数据链路层，不区别层，在传统意义上的界面层，是很重要的，TCP / IP模型不区分它们。]]></content>
  </entry>
  <entry>
    <title><![CDATA[交换机上的WLAN配置]]></title>
    <url>%2F2019%2F05%2F13%2F%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84WLAN%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[华为交换机基本配置命令 一、单交换机VLAN划分命令 命令解释system 进入系统视图system-view 进入系统视图quit 退到系统视图undo vlan 20 删除vlan 20sysname 交换机命名disp vlan 显示vlanvlan 20 创建vlan(也可进入vlan 20)port e1/0/1 to e1/0/5 把端口1-5放入VLAN 20 中 5700系列 单个端口放入VLAN [Huawei]int g0/0/1 [Huawei]port link-type access （注：接口类型access，hybrid、trunk） [Huawei]port default vlan 10 批量端口放入VLAN[Huawei]port-group 1[Huawei-port-group-1]group-member ethernet G0/0/1 to ethernet G0/0/20[Huawei-port-group-1]port hybrid untagged vlan 3 删除group（组） vlan 200内的15端口[Huawei]int g0/0/15[Huawei-GigabitEthernet0/0/15]undo port hybrid untagged vlan 200 通过group端口限速设置[Huawei]Port-group 2[Huawei]group-member g0/0/2 to g0/0/23[Huawei]qos lr outbound cir 2000 cbs 20000disp vlan 20 显示vlan里的端口20int e1/0/24 进入端口24undo port e1/0/10 表示删除当前VLAN端口10disp curr 显示当前配置return 返回Save 保存info-center source DS channel 0 log state off trap state off 通过关闭日志信息命令改变DS模块来实现（关闭配置后的确认信息显示）info-center source DS channel 0 log state on trap state on 通过打开日志信息命令改变DS模块来实现（打开配置后的确认信息显示） 二、配置交换机支持TELNEsystem 进入系统视图sysname 交换机命名int vlan 1 进入VLAN 1ip address 192.168.3.100 255.255.255.0 配置IP地址user-int vty 0 4 进入虚拟终端authentication-mode password (aut password) 设置口令模式set authentication password simple 222 (set aut pass sim 222) 设置口令user privilege level 3(use priv lev 3) 配置用户级别disp current-configuration （disp cur) 查看当前配置disp ip int 查看交换机VLAN IP配置删除配置必须退到用户模式reset saved-configuration(reset saved) 删除配置Reboot 重启交换机 三、跨交换机VLAN的通讯在sw1上：vlan 10 建立VLAN 10int e1/0/5 进入端口5port access vlan 10 把端口5加入vlan 10vlan 20 建立VLAN 20int e1/0/15 进入端口15port access vlan 20 把端口15加入VLAN 20int e1/0/24 进入端口24port link-type trunk 把24端口设为TRUNK端口port trunk permit vlan all 同上在SW2上:vlan 10 建立VLAN 10int e1/0/20 进入端口20port access vlan 10 把端口20放入VLAN 10int e1/0/24 进入端口24port link-type trunk 把24端口设为TRUNK端口port trunk permit vlan all (port trunk permit vlan 10 只能为vlan 10使用)24端口为所有VLAN使用disp int e1/0/24 查看端口24是否为TRUNKundo port trunk permit vlan all 删除该句 四、路由的配置命令system 进入系统模式sysname 命名int e1/0 进入端口ip address 192.168.3.100 255.255.255.0 设置IPundo shutdown 打开端口disp ip int e1/0 查看IP接口情况disp ip int brief 查看IP接口情况user-int vty 0 4 进入口令模式authentication-mode password(auth pass) 进入口令模式set authentication password simple 222 37 设置口令user privilege level 3 进入3级特权save 保存配置reset saved-configuration 删除配置（用户模式下运行）undo shutdown 配置远程登陆密码int e1/4ip route 192.168.3.0(目标网段） 255.255.255.0 192.168.12.1（下一跳：下一路由器的接口） 静态路由ip route 0.0.0.0 0.0.0.0 192.168.12.1 默认路由disp ip rout 显示路由列表华3C AR-18E1/0（lan1-lan4)E2/0(wan0)E3/0(WAN1)路由器连接使用直通线。wan0接wan0或wan1接wan1计算机的网关应设为路由器的接口地址。 五、三层交换机配置VLAN-VLAN通讯sw1(三层交换机）:system 进入视图sysname 命名vlan 10 建立VLAN 10vlan 20 建立VLAN 20int e1/0/20 进入端口20port access vlan 10 把端口20放入VLAN 10int e1/0/24 进入24端口port link-type trunk 把24端口设为TRUNK端口port trunk permit vlan all (port trunk permit vlan 10 只能为vlan 10使用)24端口为所有VLAN使用sw2:vlan 10int e1/0/5port access vlan 10int e1/0/24port link-type trunk 把24端口设为TRUNK端口port trunk permit vlan all (port trunk permit vlan 10 只能为vlan 10使用)24端口为所有VLAN使用sw1(三层交换机）:int vlan 10 创建虚拟接口VLAN 10ip address 192.168.10.254 255.255.255.0 设置虚拟接口VLAN 10的地址int vlan 20 创建虚拟接口VLAN 20ip address 192.168.20.254 255.255.255.0 设置虚拟接口IP VLAN 20的地址注意：vlan 10里的计算机的网关设为 192.168.10.254vlan 20里的计算机的网关设为 192.168.20.254 六、动态路由RIPR1:int e1/0 进入e1/0端口ip address 192.168.3.1 255.255.255.0 设置IPint e2/0 进入e2/0端口ip adress 192.168.5.1 255.255.255.0 设置IPrip 设置动态路由network 192.168.5.0 定义IPnetwork 192.168.3.0 定义IPdisp ip rout 查看路由接口R2:int e1/0 进入e1/0端口ip address 192.168.4.1 255.255.255.0 设置IPint e2/0 进入e2/0端口ip adress 192.168.5.2 255.255.255.0 设置IPrip 设置动态路由network 192.168.5.0 定义IPnetwork 192.168.4.0 定义IPdisp ip rout 查看路由接口（注意：两台PC机的网关设置PC1 IP：192.168.3.1 PC2 IP：192.168.4.1） 七、IP访问列表int e1/0ip address 192.168.3.1 255.255.255.0int e2/0ip address 192.168.1.1 255.255.255.0int e3/0ip address 192.168.2.1 255.255.255.0acl number 2001 （2001-2999属于基本的访问列表）rule 1 deny source 192.168.1.0 0.0.0.255 (拒绝地址192.168.1.0网段的数据通过)rule 2 permit source 192.168.3.0 0.0.0.255(允许地址192.168.3.0网段的数据通过)以下是把访问控制列表在接口下应用：firewall enablefirewall default permitint e3/0firewall packet-filter 2001 outbounddisp acl 2001 显示信息undo acl number 2001 删除2001控制列表扩展访问控制列表acl number 3001rule deny tcp source 192.168.3.0 0.0.0.255 destination 192.168.2.0 0.0.0.255 destination-port eq ftp必须在r-acl-adv-3001下才能执行rule permit ip source an destination any (rule permit ip)int e3/0firewall enable 开启防火墙firewall packet-filter 3001 inbound必须在端口E3/0下才能执行 八、命令的标准访问IP列表(三层交换机）:允许A组机器访问服务器内资料，不允许访问B组机器（服务器没有限制）sysvlan 10name servervlan 20name teachervlan 30name studentint e1/0/5port access vlan 10int e1/0/10port access vlan 20int e1/0/15port access vlan 30int vlan 10ip address 192.168.10.1 255.255.255.0undo shint vlan 20ip address 192.168.20.1 255.255.255.0int vlan 30ip address 192.168.30.1 255.255.255.0acl number 2001rule 1 deny source 192.168.30.0 0.0.0.255rule 2 permit source anydisp acl 2001 查看2001列表int e1/0/10port access vlan 20packet-filter outbound ip-group 2001 rule 1出口 九、允许A机器访问B机器的FTP但不允许访问WWW，C机器没有任何限制。vlan 10vlan 20vlan 30int e1/0/5port access vlan 10int e1/0/10port access vlan 20int e1/0/15port access vlan 30int vlan 10ip address 192.168.10.1 255.255.255.0undo shint vlan 20ip address 192.168.20.1 255.255.255.0int vlan 30ip address 192.168.30.1 255.255.255.0acl number 3001rule 1 deny tcp source 192.168.30.0 0.0.0.255 destination 192.168.10.0 0.0.0.255 destination-port eq wwwint e1/0/15packet-filter inbound ip-group 3001 rule 1进口 十、NAT地址转换（单一静态一对一地址转换）R1:syssysname R1int e1/0ip address 192.168.3.1 255.255.255.0int e2/0ip address 192.1.1.1 255.255.255.0R2:syssysname R2int e2/0ip address 192.1.1.2 255.255.255.0int e1/0ip address 10.80.1.1 255.255.255.0回到R1：nat static 192.168.3.1 192.1.1.1int e2/0nat outbound staticip route 0.0.0.0 0.0.0.0 192.1.1.2 十一、NAT内部整网段地址转换R1:syssysname R1int e1/0ip address 192.168.3.1 255.255.255.0int e2/0ip address 192.1.1.1 255.255.255.0acl number 2008rule 0 permit source 192.168.3.0 0.0.0.255rule 1 denyquitint e2/0nat outbound 2008quitip route-static 0.0.0.0 0.0.0.0 192.1.1.2 preference 60↑下一个路由接口地址R2:syssysname R2int e2/0ip address 192.1.1.2 255.255.255.0int e1/0ip address 10.80.1.1 255.255.255.0NAT地址池配置：R1:syssysname R1int e1/0ip address 192.168.3.1 255.255.255.0int e2/0ip address 192.1.1.1 255.255.255.0nat address-group 1 192.1.1.1 192.1.1.5 配置地址池undo address-group 1 删除地址池acl number 2001 创建访问列表rule permit source 192.168.1.0 0.0.0.255允许192.168.1.0/24网段地址转换(ethernet2/0指路由器wan口)：int e2/0nat outbound 2001 address-group 1 启用协议ip route 0.0.0.0 0.0.0.0 192.1.1.2 默认路由R2:syssysname R2int e1/0ip address 10.80.1.1 255.255.255.0int e2/0ip address 192.1.1.2 255.255.255.0AR18-22-8配置命令 一、vlan配置1、vlan划分方案 | 部门 | vlan名 | ip地址 | 端口分配 | | J室 | vlan10 | 192.168.10.1/24 | ethernet 3/1 || K室 | vlan20 | 192.168.20.1/24 | ethernet 3/2 || C室 | vlan30 | 192.168.30.1/24 | ethernet 3/3 || Server | vlan40 | 192.168.0.1/24 | ethernet 3/{4,5,6} | 2、显示vlan信息的命令显示指定VLAN 的相关信息。display vlan vid显示指定VLAN 配置的最大处理报文数目。display vlan max-packet-process vid显式指定VLAN 的报文统计信息，包括接收和发送的报文数目。display vlan statistics vid vid显示某个接口的VLAN 配置信息。display vlan interface interface-type interface-num清除指定VLAN 的报文统计信息。reset vlan statistics vid vid 3、配置物理端口配置路由器，进入Ethernet 端口视图，指定端口的链路类型，把端口加入到指定vlan中，注意access端口加入的vlan不能是vlan1。 配置Ethernet3/1 system-viewH3C interface ethernet 3/1 进入端口1H3C-Ethernet3/1 port link-type access 设置端口类型为accessH3C-Ethernet3/1 port access vlan 10 把该端口加到vlan10中H3C-Ethernet3/1 quit 配置Ethernet3/2H3C interface ethernet 3/2H3C-Ethernet3/2 port link-type accessH3C-Ethernet3/2 port access vlan 20H3C-Ethernet3/2 quit 配置Ethernet3/3H3C interface ethernet 3/3H3C-Ethernet3/3 port link-type accessH3C-Ethernet3/3 port access vlan 30H3C-Ethernet3/3 quit 配置Ethernet3/4H3C interface ethernet 3/4H3C-Ethernet3/4 port link-type accessH3C-Ethernet3/4 port access vlan 40H3C-Ethernet3/4 quit 配置Ethernet3/5H3C interface ethernet 3/5H3C-Ethernet3/5 port link-type accessH3C-Ethernet3/5 port access vlan 40H3C-Ethernet3/5 quit 配置Ethernet3/6H3C interface ethernet 3/6H3C-Ethernet3/6 port link-type accessH3C-Ethernet3/6 port access vlan 40H3C-Ethernet3/6 quit 4、配置虚拟端口VLAN之间要实现互通，需要配置相应的以太网子接口，即VLAN 对应的路由接口，创建并进入相应的子接口视图，为其配置相应的封装协议和关联的VLAN ID，及IP 地址和掩码，ethernet 3/0 是三层虚拟端口。 配置Ethernet 3/0.1H3C interface ethernet 3/0.1 创建并进入子接口H3C-Ethernet3/0.1 vlan-type dot1q vid 10 设置以太网子接口的封装类型以及相关联的VLAN IDH3C-Ethernet3/0.1 ip address 192.168.10.1 255.255.255.0H3C-Ethernet3/0.1 quit 配置Ethernet 3/0.2H3C interface ethernet 3/0.2H3C-Ethernet3/0.2 vlan-type dot1q vid 20H3C-Ethernet3/0.2 ip address 192.168.20.1 255.255.255.0H3C-Ethernet3/0.2 quit 配置Ethernet 3/0.3H3C interface ethernet 3/0.3H3C-Ethernet3/0.3 vlan-type dot1q vid 30H3C-Ethernet3/0.3 ip address 192.168.30.1 255.255.255.0H3C-Ethernet3/0.3 quit 配置Ethernet 3/0.4H3C interface ethernet 3/0.4H3C-Ethernet3/0.4 vlan-type dot1q vid 40H3C-Ethernet3/0.4 ip address 192.168.0.1 255.255.255.0H3C-Ethernet3/0.4 quit 二、DHCP服务器配置1、检测DHCP服务器display dhcp server ip-in-use 查看地址池动态地址绑定信息display dhcp server conflict 查看DHCP地址冲突的统计信息display dhcp server statistics 查看DHCP服务器的统计信息display dhcp servertree 查看DHCP地址池结构 2、具体配置公共配置（server和relay都适用） system-view 进入系统视图H3C dhcp enable 使能DHCP服务H3C dhcp server detect 使能伪DHCP服务器检测功能 全局地址池配置H3C dhcp select global interface ethernet 3/0.1 to ethernet 3/0.4 配置接口工作在DHCP Server模式，从全局地址池分配地址H3C dhcp server ip-pool vlan10 创建全局地址池vlan10(最多支持128个全局地址池/路由器)H3C-ip-pool network 192.168.10.0 mask 255.255.255.0 配置动态分配的IP地址范围(只可配置1个/地址池)H3C-ip-pool expired day 7 hour 23 minute 59 配置租约H3C-ip-pool domain-name pearl.cn 配置域名H3C-ip-pool dns-list ip-address 192.168.0.6 202.106.0.20 202.106.196.115 配置DNS(最多8个/地址池)H3C-ip-pool gateway-list ip-address 192.168.10.1 配置默认网关(最多8个/地址池)H3C dhcp server forbidden-ip 192.168.10.1 192.168.10.10 配置保留IP地址范围(可配置多个/地址池)H3C dhcp server relay information enable 使能DHCP Server支持option 82 接口地址池配置H3C dhcp select interface interface ethernet 3/0.1 to ethernet 3/0.4 （指虚拟接口还是指物理接口？？？）配置多个接口工作在DHCP Server模式，从接口地址池分配地址，同时自动创建“接口地址池”H3C dhcp server expired day 7 hour 23 minute 59 interface ethernet 3/0.1 to ethernet 3/0.4H3C dhcp server domain-name pearl.cn interface ethernet 3/0.1 to ethernet 3/0.4H3C dhcp server dns-list ip-address 192.168.0.6 202.106.0.20 202.106.196.115 interface ethernet 3/0.1 to ethernet 3/0.4H3C interface ethernet 3/0.1H3C-interface gateway-list ip-address 192.168.10.1H3C dhcp server forbidden-ip 192.168.10.1 192.168.10.10 （是否接口模式下配？？）H3C dhcp server relay information enable 三、NAT配置配置地址池和访问控制列表：H3C nat address-group 1 222.128.28.172 222.128.28.174H3C acl number 2001H3C-acl-basic-2001rule permit source 192.168.0.0 0.0.0.255 允许192.168.0.0/24网段地址转换(ethernet3/0指路由器wan口)：H3C interface ethernet3/0H3C-ethernet3/0 nat outbound 2001 address-group 1 设置内部FTP服务器：H3C-ethernet3/0 nat server protocol tcp global 222.128.28.171 inside 192.168.0.8 ftp 设置内部www服务器1：H3C-ethernet3/0 nat server protocol tcp global 222.128.28.171 inside 192.168.0.9 www 设置内部www服务器2：H3C-ethernet3/0 nat server protocol tcp global 222.128.28.171 8080 inside 192.168.0.10 www 1、配置文件相关命令[Quidway]display current-configuration 显示当前生效的配置[Quidway]display saved-configuration 显示flash中配置文件，即下次上电启动时所用 的配置文件reset saved-configuration 檫除旧的配置文件reboot 交换机重启display version 显示系统版本信息 2、基本配置[Quidway]super password 修改特权用户密码[Quidway]sysname 交换机命名[Quidway]interface ethernet 1/0/1 进入接口视图[Quidway]interface vlan 1 进入接口视图[Quidway-Vlan-interfacex]ip address 10.1.1.11 255.255.0.0 配置VLAN的IP地址[Quidway]ip route-static 0.0.0.0 0.0.0.0 10.1.1.1 静态路由＝网关 3、telnet配置[Quidway]user-interface vty 0 4 进入虚拟终端[S3026-ui-vty0-4]authentication-mode password 设置口令模式[S3026-ui-vty0-4]set authentication-mode password simple xmws123 设置口令[S3026-ui-vty0-4]user privilege level 3 用户级别 4、端口配置[Quidway-Ethernet1/0/1]duplex {half|full|auto} 配置端口工作状态[Quidway-Ethernet1/0/1]speed {10|100|auto} 配置端口工作速率[Quidway-Ethernet1/0/1]flow-control 配置端口流控[Quidway-Ethernet1/0/1]mdi {across|auto|normal} 配置端口平接扭接[Quidway-Ethernet1/0/1]port link-type {trunk|access|hybrid} 设置端口工作模式[Quidway-Ethernet1/0/1]undo shutdown 激活端口[Quidway-Ethernet1/0/2]quit 退出系统视图 5、链路聚合配置[DeviceA] link-aggregation group 1 mode manual 创建手工聚合组1[Qw_A] interface ethernet 1/0/1 将以太网端口Ethernet1/0/1加入聚合组1[Qw_A-Ethernet1/0/1] port link-aggregation group 1[Qw_A-Ethernet1/0/1] interface ethernet 1/0/2 将以太网端口Ethernet1/0/1加入聚合组1[Qw_A-Ethernet1/0/2] port link-aggregation group 1[Qw_A] link-aggregation group 1 service-type tunnel # 在手工聚合组的基础上创建tunnel业务环回组。[Qw_A] interface ethernet 1/0/1 将以太网端口Ethernet1/0/1加入业务环回组。[Qw_A-Ethernet1/0/1] undo stp[Qw_A-Ethernet1/0/1] port link-aggregation group 1 6、端口镜像[Quidway]monitor-port 指定镜像端口[Quidway]port mirror 指定被镜像端口[Quidway]port mirror int_list observing-port int_type int_num 指定镜像和被镜像 7、VLAN配置[Quidway]vlan 4 创建VLAN[Quidway-vlan4]port ethernet 1/0/1 to ethernet 1/0/4 在VLAN中增加端口① 配置基于access的VLAN[Quidway-Ethernet1/0/2]port access vlan 4 当前端口加入到VLAN注意：缺省情况下，端口的链路类型为Access类型，所有Access端口均属于且只属于VLAN1② 配置基于trunk的VLAN[Quidway-Ethernet 1/0/24]port link-type trunk 设置当前端口为trunk[Quidway-Ethernet 1/0/24]port trunk permit vlan {ID|All} 设trunk允许的VLAN注意：所有端口缺省情况下都是允许VLAN1的报文通过的[Quidway-Ethernet1/0/2]port trunk pvid vlan 34 设置trunk端口的PVID③ 配置基于Hybrid端口的VLAN[Quidway-Ethernet1/0/2]port link-type hybrid 配置端口的链路类型为Hybrid类型[Quidway-Ethernet1/0/2]port hybrid vlan vlan-id-list { tagged | untagged } 允许指定的VLAN通过当前Hybrid端口注意：缺省情况下，所有Hybrid端口只允许VLAN1通过[Quidway-Ethernet1/0/2]port hybrid pvid vlan vlan-id 设置Hybrid端口的缺省VLAN注意：缺省情况下，Hybrid端口的缺省VLAN为VLAN1④ VLAN描述[Quidway]description string 指定VLAN描述字符[Quidway]undo description 删除VLAN描述字符[Quidway]display vlan [vlan_id] 查看VLAN设置⑤ 私有VLAN配置[Qw_A-vlanx]isolate-user-vlan enable 设置主vlan[Qw_A]Isolate-user-vlan secondary 设置主vlan包括的子vlan[Quidway-Ethernet1/0/2]port hybrid pvid vlan 设置vlan的pvid[Quidway-Ethernet1/0/2]port hybrid pvid 删除vlan的pvid[Quidway-Ethernet1/0/2]port hybrid vlan vlan_id_list untagged 设置无标识的vlan如果包的vlan id与PVId一致，则去掉vlan信息. 默认PVID=1。所以设置PVID为所属vlan id, 设置可以互通的vlan为untagged. 8、STP配置[Quidway]stp {enable|disable} 设置生成树,默认关闭[Quidway]stp mode rstp 设置生成树模式为rstp[Quidway]stp priority 8192 设置交换机的优先级[Quidway]stp root {primary|secondary} 设置为根或根的备份[Quidway-Ethernet0/1]stp cost 200 设置交换机端口的花费 MSTP配置： 配置MST域名为info，MSTP修订级别为1，VLAN映射关系为VLAN2～VLAN10映射到生成树实例1上，VLAN20～VLAN30映射生成树实例2上。 system-view[Sysname] stp region-configuration[Sysname-mst-region] region-name info[Sysname-mst-region] instance 1 vlan 2 to 10[Sysname-mst-region] instance 2 vlan 20 to 30[Sysname-mst-region] revision-level 1[Sysname-mst-region] active region-configuration 9、MAC地址表的操作① 在系统视图下添加MAC地址表项[Quidway]mac-address { static | dynamic | blackhole } mac-address interface interface-type interface-number vlan vlan-id ；添加MAC地址表项在添加MAC地址表项时，命令中interface参数指定的端口必须属于vlan参数指定的VLAN，否则将添加失败。如果vlan参数指定的VLAN是动态VLAN，在添加静态MAC地址之后，会自动变为静态VLAN。② 在以太网端口视图下添加MAC地址表项[Quidway-Ethernet1/0/2]mac-address { static | dynamic | blackhole } mac-address vlan vlan-id在添加MAC地址表项时，当前的端口必须属于命令中vlan参数指定的VLAN，否则将添加失败；如果vlan参数指定的VLAN是动态VLAN，在添加静态MAC地址之后，会自动变为静态VLAN。[Quidway]mac-address timer { aging age | no-aging } 设置MAC地址表项的老化时间注意：缺省情况下，MAC地址表项的老化时间为300秒，使用参数no-aging时表示不对MAC地址表项进行老化。③ MAC地址老化时间的配置对所有端口都生效，但地址老化功能只对动态的（学习到的或者用户配置可老化的）MAC地址表项起作用。[Quidway-Ethernet1/0/2]mac-address max-mac-count count 设置端口最多可以学习到的MAC地址数量；注意：缺省情况下，没有配置对端口学习MAC地址数量的限制。反之，如果端口启动了MAC地址认证和端口安全功能，则不能配置该端口的最大MAC地址学习个数。[Quidway-Ethernet1/0/2]port-mac start-mac-address 配置以太网端口MAC地址的起始值在缺省情况下，E126/E126A交换机的以太网端口是没有配置MAC地址的，因此当交换机在发送二层协议报文（例如STP）时，由于无法取用发送端口的MAC地址，将使用该协议预置的MAC地址作为源地址填充到报文中进行发送。在实际组网中，由于多台设备都使用相同的源MAC地址发送二层协议报文，会造成在某台设备的不同端口学习到相同MAC地址的情况，可能会对MAC地址表的维护产生影响。[Quidway]display mac-address 显示地址表信息[Quidway]display mac-address aging-time 显示地址表动态表项的老化时间[Quidway]display port-mac 显示用户配置的以太网端口MAC地址的起始值 10、GVRP配置[Qw_A] gvrp 开启全局GVRP[Qw_A-Ethernet1/0/1] gvrp 在以太网端口Ethernet1/0/1上开启GVRP[Qw_A-Ethernet1/0/1] gvrp registration { fixed | forbidden | normal } 配置GVRP端口注册模式 ，缺省为normal。[Qw_A] display garp statistics [ interface interface-list ] 显示GARP统计信息[Qw_A] display garp timer [ interface interface-list ] 显示GARP定时器的值[Qw_A] display gvrp statistics [ interface interface-list ] 显示GVRP统计信息[Qw_A] display gvrp status 显示GVRP的全局状态信息[Qw_A] display gvrp statusreset garp statistics [ interface interface-list ] 清除GARP统计 11、DLDP配置 [Qw_A] interface gigabitethernet 1/1/1[Qw_A-GigabitEthernet1/1/1] duplex full 配置端口工作在强制全双工模式[Qw_A-GigabitEthernet1/1/1] speed 1000 速率为1000Mbits/s[Qw_A] dldp enable 全局开启DLDP。[Qw_A] dldp interval 15 设置发送DLDP报文的时间间隔为15秒。[Qw_A] dldp work-mode { enhance | normal } 配置DLDP协议的工作模式为加强模式。 缺省为normal。[Qw_A] dldp unidirectional-shutdown { auto | manual } 配置DLDP单向链路操作模式为自动模式。 缺省为autoQw_A] display dldp 1 查看DLDP状态。① 当光纤交叉连接时，可能有两个或三个端口处于Disable状态，剩余端口处于Inactive状态。② 当光纤一端连接正确，一端未连接时：如果DLDP的工作模式为normal，则有收光的一端处于Advertisement状态，没有收光的一端处于Inactive状态。如果DLDP的工作模式为enhance，则有收光的一端处于Disable状态，没有收光的一端处于Inactive状态。③ dldp reset命令在全局下可以重置所有端口的DLDP状态，在接口下可以充值该端口的DLDP状态 12、端口隔离配置① 通过端口隔离特性，用户可以将需要进行控制的端口加入到一个隔离组中，实现隔离组中的端口之间二层、三层数据的隔离，既增强了网络的安全性，也为用户提供了灵活的组网方案。[Sysname] interface ethernet1/0/2 将以太网端口Ethernet1/0/2加入隔离组。[Sysname-Ethernet1/0/2] port isolate[Sysname] display isolate port 显示隔离组中的端口信息② 配置隔离组后，只有隔离组内各个端口之间的报文不能互通，隔离组内端口与隔离组外端口以及隔离组外端口之间的通信不会受到影响。③ 端口隔离特性与以太网端口所属的VLAN无关。④ 当汇聚组中的某个端口加入或离开隔离组后，本设备中同一汇聚组内的其它端口，均会自动加入或离开该隔离组。⑤ 对于既处于某个聚合组又处于某个隔离组的一组端口，其中的一个端口离开聚合组时不会影响其他端口，即其他端口仍将处于原聚合组和原隔离组中。⑥ 如果某个聚合组中的端口同时属于某个隔离组，当在系统视图下直接删除该聚合组后，该聚合组中的端口仍将处于该隔离组中。⑦ 当隔离组中的某个端口加入聚合组时，该聚合组中的所有端口，会自动加入隔离组中。13、端口安全配置[Switch] port-security enable 启动端口安全功能[Switch] interface Ethernet 1/0/1 进入以太网Ethernet1/0/1端口视图[Switch-Ethernet1/0/1] port-security max-mac-count 80 设置端口允许接入的最大MAC地址数为80[Switch-Ethernet1/0/1] port-security port-mode autolearn 配置端口的安全模式为autolearn[Switch-Ethernet1/0/1] mac-address security 0001-0002-0003 vlan 1 将Host 的MAC地址0001-0002-0003作为Security MAC添加到VLAN 1中[Switch-Ethernet1/0/1] port-security intrusion-mode disableport-temporarily 设置Intrusion Protection特性被触发后，暂时关闭该端口[Switch]port-security timer disableport 30 关闭时间为30秒。 14、端口绑定配置通过端口绑定特性，网络管理员可以将用户的MAC地址和IP地址绑定到指定的端口上。进行绑定操作后，交换机只对从该端口收到的指定MAC地址和IP地址的用户发出的报文进行转发，提高了系统的安全性，增强了对网络安全的监控。[Qw_A-Ethernet1/0/1] am user-bind mac-addr 0001-0002-0003 ip-addr 10.12.1.1将Host 1的MAC地址和IP地址绑定到Ethernet1/0/1端口。有的交换机上绑定的配置不一样[Qw_A] interface ethernet 1/0/2[Qw_A-Ethernet1/0/2] user-bind ip-address 192.168.0.3 mac-address 0001-0203-0405端口过滤配置[Qw_A] interface ethernet1/0/1 配置端口Ethernet1/0/1的端口过滤功能。[Qw_A-Ethernet1/0/1] ip check source ip-address mac-address[Qw_A] dhcp-snooping 开启DHCP Snooping功能。[Qw_A] interface ethernet1/0/2设置与DHCP服务器相连的端口Ethernet1/0/2为信任端口。[Qw_A-Ethernet1/0/2] dhcp-snooping trust在端口Ethernet1/0/1上启用IP过滤功能，防止客户端使用伪造的不同源IP地址对服务器进行攻击 15、BFD配置Qw_A、Qw_B、Qw_C相互可达，在Qw_A上配置静态路由可以到达Qw_C，并使能BFD检测功能。① 在Qw_A上配置静态路由，并使能BFD检测功能，通过BFD echo报文方式实现BFD功能。&lt;Qw_A&gt; system-view[Qw_A] bfd echo-source-ip 123.1.1.1[Qw_A] interface vlan-interface 10[Qw_A-vlan-interface10] bfd min-echo-receive-interval 300[Qw_A-vlan-interface10] bfd detect-multiplier 7[Qw_A-vlan-interface10] quit[Qw_A] ip route-static 120.1.1.1 24 10.1.1.100 bfd echo-packet② 在Qw_A上打开BFD功能调试信息开关。&lt;Qw_A&gt; debugging bfd event&lt;Qw_A&gt; debugging bfd scm&lt;Qw_A&gt; terminal debugging③ 在Qw_A上可以打开BFD功能调试信息开关，断开Hub和Qw_B之间的链路，验证配置结果。验证结果显示，④ Qw_A能够快速感知Qw_A与Qw_B之间链路的变化。 16、QinQ配置Provider A、Provider B之间通过Trunk端口连接，Provider A属于运营商网络的VLAN1000，Provider B属于运营商网络的VLAN2000。Provider A和Provider B之间，运营商采用其他厂商的设备，TPID值为0x8200。 希望配置完成后达到下列要求：Customer A的VLAN10的报文可以和Customer B的VLAN10的报文经过运营商网络的VLAN1000转发后互通；Customer A的VLAN20的报文可以和Customer C的VLAN20的报文经过运营商网络的VLAN2000转发后互通。[ProviderA] interface ethernet 1/0/1 # 配置端口为Hybrid端口，且允许VLAN10，VLAN20，VLAN1000和VLAN2000的报文通过，并且在发送时去掉外层Tag。[ProviderA-Ethernet1/0/1] port link-type hybrid[ProviderA-Ethernet1/0/1] port hybrid vlan 10 20 1000 2000 untagged[ProviderA-Ethernet1/0/1] qinq vid 1000 将来自VLAN10的报文封装VLAN ID为1000的外层Tag。[ProviderA-Ethernet1/0/1-vid-1000] raw-vlan-id inbound 10[ProviderA-Ethernet1/0/1-vid-1000] quit[ProviderA-Ethernet1/0/1] qinq vid 2000 将来自VLAN20的报文封装VLAN ID为2000的外层Tag。[ProviderA-Ethernet1/0/1-vid-2000] raw-vlan-id inbound 20[ProviderA] interface ethernet 1/0/2 配置端口的缺省VLAN为VLAN1000。[ProviderA-Ethernet1/0/2] port access vlan 1000[ProviderA-Ethernet1/0/2] qinq enable 配置端口的基本QinQ功能，将来自VLAN10的报文封装VLAN ID为1000的外层Tag。[ProviderA] interface ethernet 1/0/3 配置端口为Trunk端口，且允许VLAN1000和VLAN2000的报文通过。[ProviderA-Ethernet1/0/3] port link-type trunk[ProviderA-Ethernet1/0/3] port trunk permit vlan 1000 2000[ProviderA-Ethernet1/0/3] qinq ethernet-type 8200 为与公共网络中的设备进行互通，配置端口添加外层Tag时采用的TPID值为0x8200。[ProviderB] interface ethernet 1/0/1 配置端口为Trunk端口，且允许VLAN1000和VLAN2000的报文通过。[ProviderB-Ethernet1/0/1] port link-type trunk[ProviderB-Ethernet1/0/1] port trunk permit vlan 1000 2000[ProviderB-Ethernet1/0/1] qinq ethernet-type 8200 为与公共网络中的设备进行互通，配置端口添加外层Tag时采用的TPID值为0x8200。[ProviderB-Ethernet1/0/1] quit[ProviderB] interface ethernet 1/0/2 # 配置端口的缺省VLAN为VLAN2000。[ProviderB-Ethernet1/0/2] port access vlan 2000[ProviderB-Ethernet1/0/2] qinq enable 配置端口的基本QinQ功能，将来自VLAN20的报文封装VLAN ID为2000的外层Tag。]]></content>
  </entry>
  <entry>
    <title><![CDATA[快速搭建Hexo博客]]></title>
    <url>%2F2019%2F05%2F10%2F%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。Hexo手册由于我的环境是Windows，所以win环境的按着来就好了，Linux环境大同小异 #一、安装基本环境 1.安装Git Git 是目前比较流行的分布式版本控制系统，我们使用它与github进行交互下载对应版本的的git安装就好，下载地址装后打开Git Bash 键入git –version可以查看版本号2.安装Node.jsNode.js是一个Javascript运行环境，是一个让 JavaScript 运行在服务端的开发平台，我们用来快速生成博客的静态页面下载地址其中LTS版本为长期支持版，CURRENT版本为最新版，任选一个正常安装即可。 ##二、开始本地搭建博客 新建文件夹在本地新建一个文件夹用来储存我们的博客，Git Bash进入文件夹下，执行命令：npm install hexo -g 用来安装hexo]]></content>
  </entry>
  <entry>
    <title><![CDATA[DDCTF 浅谈逆向题]]></title>
    <url>%2F2019%2F04%2F16%2FDDCTF-%E6%B5%85%E8%B0%88%E9%80%86%E5%90%91%E9%A2%98%2F</url>
    <content type="text"><![CDATA[大概步骤如下 ###首先发现是upx的壳，进行手动脱壳载入后，单步f8一步，找到esp在内存中的位置，右键选择硬件访问断点，word型，f9跑飞至oep ###下一步，右键脱壳 ###记一下oep的rva是13f7，便于修复导入表 ###修复后拖入ida打开 ###找到关键逻辑 ###根据我们的输入作为下标，去byte 402ff8中替换对应的值，写出脚本String tab=”~}|{zyxwvutsrqponmlkjihgfedcba`_^]\[ZYXWVUTSRQPONMLKJIHGFEDCBA@?&gt;=&lt;;:9876543210/.-,+*)(‘&amp;%$#\”!”; String dd=”DDCTF{reverseME}”; for(int i=0;i&lt;dd.length();i++){ for(int j=0;j&lt;tab.length();j++){ if(dd.charAt(i)==tab.charAt(j)) { j+=32; // System.out.print((char)j); } } } 接下来就坐等flag了]]></content>
  </entry>
  <entry>
    <title><![CDATA[DDCTF web题upload]]></title>
    <url>%2F2019%2F04%2F16%2FDDCTF-web%E9%A2%98upload%2F</url>
    <content type="text"><![CDATA[详细步骤如下 Upload-IMG http://117.51.148.166/upload.php user：dd@ctfpass：DD@ctf#000 打开网站，登录过去后是一个文件上传的页面，查看网页源码没有什么特别的东西 随便上传一张图片，得知要求文件的数据中包含phpinfo() 于是开启burpsuite，抓取上传图片的HTTP包，在图片数据中的各个位置加入phpinfo()，发现没有什么用….. 有时候甚至提示上传的文件格式有误（我没有动文件头） 不过页面显示了我们上传的图片，右键下载下来，用strings命令发现下载到的图片已经没有加入的字符串了 同时还发现多了这么一行数据 ;CREATOR: gd-jpeg v1.0 (using IJG JPEG v80), quality = 76 记着曾做过upload-labs，里面有道题是将上传的文件进行了重新生成，来过滤掉上传的图片中包含的非图片数据。不过已经好几个月没碰忘掉了… 谷歌了一下文件上传绕过的姿势，在一篇文章里发现那一行数据代表着后端使用了php-gd库将图片进行了二次生成 然后我发现我即使上传gif图片，最终服务器传回来的文件头还是jpeg格式的（我谷歌了一会发现不同的图片格式可能绕过方式有些不同，这里也是庆幸题目生成的jpeg格式刚好有人做过相关的exploit，关于png文件格式的我没看懂） 谷歌了一下php-gd库的绕过，找到了一篇关于绕过的文章 大体上就是说用这个库生成的jpeg图片，有一段区域的数据即便是用这个库进行重新生成jpeg图片，也不会发生改变。 下面这张图是关于那个区域的说明 jpeg文件中有一段区域叫做Start of Scan（缩写为SOS），这个区域的前两个字节（FF DA，图中红色标记）用来标识这个区域是SOS。（对于绕过来讲，通过这两个字节可以定位到这个SOS区域） 紧接着数据是是扫描头（scan header），扫描头的前两个字节指明了这个扫描头的长度，00 0C的十进制表示为12，也就是说这个扫描头是12个字节，扫描头剩下的这10个字节我暂时不知道是干什么的….（对于绕过来讲，通过这个大小用来定位下面的扫描数据位置） 扫描头紧接着的是扫描数据（褐色标记，关于“扫描数据”这个翻译我不太确定，图里的俄文我表示emmm……），网上搜了一下好像是这个图片的压缩数据。（想了解详细信息的话建议谷歌一下。）那篇文章里说可以在这块区域写入数据，这块数据经过再次生成，不会发生变化（个人经历可能会变，不知为何…）（对于绕过来讲，通过在这个区域放置恶意代码来防止其在重新生成过程中被过滤掉） 说完了上面的绕过原理开始将这个题的做题过程首先我找了一张jpg图片（其他格式未测试） ，上传到服务器，然后把页面回显给我的图片保存下来。 （说到这我忘了讲上面文章说的一个重要的问题，就是你可以在自己的电脑上生成第一次生成的图片，但一定要确保你电脑上php-gd库的版本要和目标服务器后端用的php-gd库的版本相同，否则可能会因为版本问题导致恶意代码被过滤掉。所以在这道题里因为我不知道后台库版本，以及能下到目标服务器生成的图片，所以我没有在自己的电脑上生成那张生成图片（怎么感觉有点绕….）） 我这里用的二进制编辑器是 010 Editor（下载），这个编辑器自带模板，可以解析文件，显示其中的结构。 把图片拖到编辑器里面（第一次用会提示安装模板，安装就好） 然后你可以control+F去手动搜索字节FFDA来定位SOS区域，也可以用模板提供的解析功能，点一下下面的列表struct SOS scanStart程序会自动定位并选中SOS的前几个字节 根据上面讲的结构，定位到扫描数据的位置，然后在这个区域(图中黑色框部分）写入phpinfo() （点一下那块数据，键盘按下去会自动覆盖，control+s保存） 提交上去，拿到了flag (第一次做的时候(写这篇writeup时是第二次做)提交上去，发现还是不行，下载下来发现少了几个字母。然后我把phpinfo()这个字符串往那个区域里粘贴了好几遍，再提交上去)]]></content>
  </entry>
  <entry>
    <title><![CDATA[7天精通黑客攻防]]></title>
    <url>%2F2019%2F03%2F31%2F7%E5%A4%A9%E7%B2%BE%E9%80%9A%E9%BB%91%E5%AE%A2%E6%94%BB%E9%98%B2%2F</url>
    <content type="text"><![CDATA[如何在7天内精通黑客攻防？ 不可能的，兄嘚 开玩笑呢]]></content>
  </entry>
</search>
